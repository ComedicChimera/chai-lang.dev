/*
 * SourceLight.js 1.0.0
 * https://github.com/ComedicChimera/SourceLight.js
 * (c) 2018 Jordan Gaines
 * SourceLight may be freely distributed under the MIT License.
 */

function define(a,b){SourceLight.mappings[a]=b}function fetch(a){if(!SourceLight.mappings[a])throw a+' undefined.';return SourceLight.mappings[a]}class SourceLight{static highlight(a){function b(a){let b={"&amp;":'&',"&lt;":'<',"&gt;":'>',"&quot;":'"',"&#x27;":'\'',"&#x60;":'`'};for(var c in b){var d=new RegExp(c,'g');if(d.test(a)){var e=b[c];a=a.replace(d,e)}}return a}let c=function(a){return a=a||'code',a.startsWith('#')?[document.getElementById(a.slice(1))]:a.startsWith('.')?document.getElementsByClassName(a.slice(1)):document.getElementsByTagName(a)}(a.selector);a.theme=a.theme||'default',a.mode=a.mode||'default';let d=function(a){function b(a,c,d){let e='',f=Object.keys(a),g=!1;for(var h in f)if(h=f[h],'string'==typeof a[h])g=!0,e+=h+':'+a[h]+';';else{let e={};for(var i in h)b(a[h],h,e);for(var j in e)d[c+'.'+j]=e[j]}return g&&(d[c]=e+'"'),d}let c=Object.keys(a),d={};for(var e in c){e=c[e];let f=a[e];d=b(f,e,d)}return d}(fetch('sourcelight/theme/'+a.theme));for(var e=0;e<c.length;e++){let f=c[e];f.innerHTML=SourceLight.lex(b(f.innerHTML),fetch('sourcelight/mode/'+a.mode),d),f.setAttribute('style',d['code.region']),f.classList.add('sourcelight-highlight-region'),f.classList.add('sourcelight-'+a.theme)}}static lex(a,b,c){let d={};for(var e in b){let c=b[e],g=c.token,h=c.match,i=c.sub;if(!h)throw g+'does not have a match case.';let j=a.match(c.single?h:new RegExp(h,h.flags+'g'));for(var f in j)f=j[f],d[a.search(h)]=[f,g,i],a=a.replace(h,'\0'.repeat(f.length),1)}let g=Object.keys(d),h=[];for(var i in g)h[i]=d[g[i]];for(var j in h)j=h[j],a=a.replace('\0'.repeat(j[0].length),SourceLight.generate(j,c),1);return a}static generate(a,b){a[2]&&(a[0]=SourceLight.lex(a[0],a[2],b));let c='sourcelight-style-'+a[1].replace(/\./g,'-');if(!Object.keys(b).includes(a[1])){for(let d=a[1].split('.');0<d.length;){if(Object.keys(b).includes(d.join('.')))return'<span style="'+b[d.join('.')]+'" class="'+c+'">'+a[0]+'</span>';d.pop()}return'<span class="'+c+'">'+a[0]+'</span>'}return'<span style="'+b[a[1]]+'" class="'+c+'">'+a[0]+'</span>'}}SourceLight.mappings={},define('sourcelight/theme/default',{code:{region:{"border-radius":'5px',"background-color":'#fff8f2',"box-shadow":'inset 0 0 2px #212121',display:'block',"font-size":'16px',"white-space":'pre-line',padding:'10px'}},string:{single:{color:'#aa0000'},double:{color:'#aa0000'}},constant:{language:{color:'#aa0000'},numeric:{color:'#0098ba'}},storage:{"font-weight":'bold',type:{"font-weight":'bold',color:'#389eff'}},comment:{color:'#666666',"font-style":'italic'},keyword:{"font-weight":'bold'},variable:{"font-weight":'bold',language:{color:'#B21B39',"font-weight":'bold'}},entity:{name:{function:{color:'#B21B39',"font-weight":'bold'},type:{color:'#389eff',"font-weight":'bold'}}}}),define('sourcelight/mode/default',{});
